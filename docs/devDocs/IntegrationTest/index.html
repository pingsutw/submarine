<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Submarine Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Submarine Blog Atom Feed"><title data-react-helmet="true">How to Run Integration Test | Apache Submarine</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="How to Run Integration Test | Apache Submarine"><meta data-react-helmet="true" name="description" content="&lt;!---"><meta data-react-helmet="true" property="og:description" content="&lt;!---"><meta data-react-helmet="true" property="og:url" content="https://pingsutw.github.io/docs/devDocs/IntegrationTest"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pingsutw.github.io/docs/devDocs/IntegrationTest"><link rel="stylesheet" href="/styles.e17fbe97.css">
<link rel="preload" href="/styles.09189f07.js" as="script">
<link rel="preload" href="/runtime~main.36b43118.js" as="script">
<link rel="preload" href="/main.76a27e4e.js" as="script">
<link rel="preload" href="/1.eb6a3f1a.js" as="script">
<link rel="preload" href="/59.7305c3a6.js" as="script">
<link rel="preload" href="/60.f9f0fa51.js" as="script">
<link rel="preload" href="/935f2afb.02cd337f.js" as="script">
<link rel="preload" href="/58.438a340f.js" as="script">
<link rel="preload" href="/60491701.e79570d4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="https://github.com/apache/submarine/blob/master/docs/assets/128-black.png?raw=true" alt="Apache Submarine Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="https://github.com/apache/submarine/blob/master/docs/assets/128-black.png?raw=true" alt="Apache Submarine Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Apache Submarine</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/docs/api/environment">API</a><a class="navbar__item navbar__link" href="/docs/download">Download</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/apache/submarine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">Apache</a><ul class="dropdown__menu"><li><a href="http://www.apache.org/foundation/how-it-works.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Apache Software Foundation</a></li><li><a href="http://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Apache License</a></li><li><a href="http://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="http://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="https://github.com/apache/submarine/blob/master/docs/assets/128-black.png?raw=true" alt="Apache Submarine Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="https://github.com/apache/submarine/blob/master/docs/assets/128-black.png?raw=true" alt="Apache Submarine Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Apache Submarine</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/api/environment">API</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/download">Download</a></li><li class="menu__list-item"><a href="https://github.com/apache/submarine" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Apache</a><ul class="menu__list"><li class="menu__list-item"><a href="http://www.apache.org/foundation/how-it-works.html" target="_blank" rel="noopener noreferrer" class="menu__link">Apache Software Foundation</a></li><li class="menu__list-item"><a href="http://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="menu__link">Apache License</a></li><li class="menu__list-item"><a href="http://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="menu__link">Sponsorship</a></li><li class="menu__list-item"><a href="http://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="menu__link">Thanks</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Submarine Local Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gettingStarted/notebook">Create a Notebook</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gettingStarted/python-sdk">Install Python SDK</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">User Docs</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Submarine on Kubernetes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/userDocs/k8s/run-experiment-template-rest">Run Experiment Template Guide (REST)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/userDocs/k8s/run-pytorch-experiment-rest">Run PyTorch Experiment Guide (REST)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/userDocs/k8s/run-tensorflow-experiment-rest">Run TensorFlow Experiment Guide (REST)</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Submarine on Yarn</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/userDocs/yarn/YARNRuntimeGuide">YARN Runtime Quick Start Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/userDocs/yarn/TestAndTroubleshooting">Test and Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/userDocs/yarn/Dockerfiles">Write Dockerfiles for Submarine</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/userDocs/yarn/WriteDockerfileMX">Docker Images for MXNet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/userDocs/yarn/WriteDockerfilePT">Docker Images for PyTorch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/userDocs/yarn/WriteDockerfileTF">Docker Images for TensorFlow</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Submarine SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/userDocs/submarine-sdk/pysubmarine/development">Python SDK Development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/userDocs/submarine-sdk/pysubmarine/tracking">PySubmarine Tracking</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Submarine Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/userDocs/submarine-security/spark-security/README">Submarine Spark Security Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/userDocs/submarine-security/spark-security/build-submarine-spark-security-plugin">Building Submarine Spark Security Plugin</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Administrator Docs</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Submarine on Kubernetes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/adminDocs/k8s/README">Submarine on K8s</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/adminDocs/k8s/kind">Setup a Kubernetes cluster using Kind</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/adminDocs/k8s/helm">Deploy Submarine On K8s</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Submarine on Yarn</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/adminDocs/yarn/README">Running Submarine on YARN</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Developer Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devDocs/README">Development Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devDocs/BuildFromCode">How to Build Submarine</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/devDocs/IntegrationTest">How to Run Integration Test</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devDocs/QuickDevTips">Quick development Tips</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Community</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/community/README">Apache Submarine Community</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/community/HowToCommit">Guide for Apache Submarine Committers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/community/contributing">Guide for Apache Submarine Contributor</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Design Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/designDocs/architecture-and-requirements">Architecture and Requirment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/designDocs/implementation-notes">Implementation Notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/designDocs/environments-implementation">Environments Implementation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/designDocs/experiment-implementation">Experiment Implementation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/designDocs/notebook-implementation">Notebook Implementation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/designDocs/storage-implementation">Storage Implementation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Submarine Server</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/designDocs/submarine-server/architecture">Submarine Server Implementation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/designDocs/submarine-server/experimentSpec">Generic Expeiment Spec</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">WIP Design Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/designDocs/wip-designs/submarine-launcher">Submarine Launcher</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/designDocs/wip-designs/submarine-clusterServer">Cluster Server Design - High-Availability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/designDocs/wip-designs/security-implementation">Security Implementation</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">How to Run Integration Test</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><ol><li><p>Now, Apache Submarine supports two kinds of integration test: <code>test-e2e</code> and <code>test-k8s</code>. These two modules can be found in the <a href="https://github.com/apache/submarine/tree/master/submarine-test" target="_blank" rel="noopener noreferrer">submarine/submarine-test</a> directory.</p></li><li><p>Currently, there are some differences between <code>test-e2e</code> and <code>test-k8s</code> in operation mode. To elaborate, <code>test-e2e</code> needs to deploy Apache Submarine locally, while <code>test-k8s</code> deploys Apache Submarine via k8s.</p></li><li><p>These two test modules can be applied to different test scenarios. (In the future, these two test modules may be combined or adjusted)</p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="k8s-test"></a>k8s test<a class="hash-link" href="#k8s-test" title="Direct link to heading">#</a></h2><p>k8s test: When the user submits the code to his/her repository or the <code>apache/submarine</code> git repository, the travis test task will automatically start.</p><p>test-k8s runs test cases in travis. It will first create a k8s cluster by using the kind tool in travis,</p><p>and then compile and package the submarine project in <code>submarine-dist</code> directory to build a docker image.</p><p>Then use this latest code to build a docker image and deploy a submarine system in k8s. Then run test case in the <code>test-k8s/..</code> directory.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="run-k8s-test-in-locally"></a>Run k8s test in locally<a class="hash-link" href="#run-k8s-test-in-locally" title="Direct link to heading">#</a></h3><p>Executing the following command will perform the following actions:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mvn -Phadoop-2.9 clean package install -DskipTests verify -DskipRat -am -pl submarine-test/test-k8s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ol><li><p>The submarine project will be compiled and packaged to generate <code>submarine-dist/target/submarine-&lt;version&gt;.tar.gz</code></p></li><li><p>Call the <code>submarine-cloud/hack/integration-test.sh</code> script</p><ul><li>Call the <code>build.sh</code> script under <code>submarine/dev-support/docker-images/</code> to generate the latest <code>submarine</code>, <code>database</code> and <code>operator</code> docker images.</li><li>Call <code>submarine-cloud/hack/kind-cluster-build.sh</code> to create a k8s cluster</li><li>Call <code>submarine-cloud/hack/deploy-submarine.sh</code> to deploy the submarine system in the k8s cluster using the latest <code>submarine</code>, <code>database</code> and <code>operator</code> docker images.</li><li>Call the test cases in <code>submarine-test/test-k8s/</code> for testing.</li></ul></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="run-k8s-test-in-travis"></a>Run k8s test in travis<a class="hash-link" href="#run-k8s-test-in-travis" title="Direct link to heading">#</a></h3><p>Each time a code is submitted, travis is automatically triggered for testing.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="e2e-test"></a>E2E test<a class="hash-link" href="#e2e-test" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="e2e-tests-can-be-executed-both-locally-and-in-travis-for-workbench-developer"></a>E2E tests can be executed both locally and in Travis (For workbench developer)<a class="hash-link" href="#e2e-tests-can-be-executed-both-locally-and-in-travis-for-workbench-developer" title="Direct link to heading">#</a></h3><ul><li>Run E2E tests locally:<ul><li>Step1: Follow <a href="https://github.com/apache/submarine/blob/master/docs/workbench/HowToRun.md" target="_blank" rel="noopener noreferrer">HowToRun.md</a> to launch the submarine-server and database.</li><li>Step2: Run workbench (Angular version) locally</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd submarine/submarine-workbench/workbench-web</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm start</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Check 127.0.0.1:4200</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li>Step3: Modify the port from 8080 to 4200<ul><li><a href="https://github.com/apache/submarine/blob/master/submarine-test/test-e2e/src/test/java/org/apache/submarine/WebDriverManager.java" target="_blank" rel="noopener noreferrer">WebDriverManager.java</a>: <code>url = &quot;http://localhost:8080&quot;;</code> --&gt; <code>url = &quot;http://localhost:4200&quot;;</code></li><li><a href="https://github.com/apache/submarine/tree/master/submarine-test/test-e2e/src/test/java/org/apache/submarine/integration" target="_blank" rel="noopener noreferrer">Your Unit test case</a>: <code>8080</code> --&gt; <code>4200</code></li></ul></li><li>Step4: Comment the <code>headless</code> option<ul><li><a href="https://github.com/apache/submarine/blob/master/submarine-test/test-e2e/src/test/java/org/apache/submarine/ChromeWebDriverProvider.java" target="_blank" rel="noopener noreferrer">ChromeWebDriverProvider.java</a>: <code>chromeOptions.addArguments(&quot;--headless&quot;);</code> --&gt; <code>//chromeOptions.addArguments(&quot;--headless&quot;);</code></li><li>With the <code>headless</code> option, the selenium will be executed in background.</li></ul></li><li>Step5: Run E2E test cases (Please check the following section <strong>Run the existing tests</strong>)</li></ul></li><li>Run E2E tests in Travis:<ul><li>Step1: Make sure that the port must be 8080 rather than in <a href="https://github.com/apache/submarine/blob/master/submarine-test/test-e2e/src/test/java/org/apache/submarine/WebDriverManager.java" target="_blank" rel="noopener noreferrer">WebDriverManager.java</a> and <a href="https://github.com/apache/submarine/tree/master/submarine-test/test-e2e/src/test/java/org/apache/submarine/integration" target="_blank" rel="noopener noreferrer">all test cases</a>.</li><li>Step2: Make sure that the <code>headless</code> option is not commented in <a href="https://github.com/apache/submarine/blob/master/submarine-test/test-e2e/src/test/java/org/apache/submarine/ChromeWebDriverProvider.java" target="_blank" rel="noopener noreferrer">ChromeWebDriverProvider.java</a>.</li><li>Step3: If you push the commit to Github, the Travis CI will execute automatically and you can check it in <code>https://travis-ci.org/${your_github_account}/${your_repo_name}</code>.</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="run-the-existing-tests"></a>Run the existing tests.<a class="hash-link" href="#run-the-existing-tests" title="Direct link to heading">#</a></h3><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="move-to-the-working-directory"></a>Move to the working directory.<a class="hash-link" href="#move-to-the-working-directory" title="Direct link to heading">#</a></h5><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd submarine/submarine-test/test-e2e</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="compile--run"></a>Compile &amp; Run.<a class="hash-link" href="#compile--run" title="Direct link to heading">#</a></h5><blockquote><p>Following command will compile all files and run <strong>all</strong> files ending with &quot;IT&quot; in the <a href="https://github.com/apache/submarine/tree/master/submarine-test/test-e2e/src/test/java/org/apache/submarine/integration" target="_blank" rel="noopener noreferrer">directory</a>.</p><ul><li>For linux<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mvn verify</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li>For MacOS</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mvn clean install -U</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Run a specific testcase</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mvn -Dtest=${your_test_case_file_name} test //ex: mvn -Dtest=loginIT test </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></blockquote><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="result"></a>Result<a class="hash-link" href="#result" title="Direct link to heading">#</a></h5><p>If all of the function under test are succeeded, it will show.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">BUILD SUCCESS</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Otherwise, it will show.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">BUILD FAILURE</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="add-your-own-integration-test"></a>Add your own integration test<a class="hash-link" href="#add-your-own-integration-test" title="Direct link to heading">#</a></h3><ol><li>Create a new file ending with &quot;IT&quot; under &quot;submarine/submarine-test/test-e2e/src/test/java/org/apache/submarine/integration/&quot;.</li><li>Your public class is recommended to extend AbstractSubmarineIT. The class AbstractSubmarineIT contains some commonly used functions.</li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-java codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token class-name" style="color:rgb(255, 203, 107)">WebElement</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">pollingWait</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">By</span><span class="token plain"> locator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">final</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">long</span><span class="token plain"> timeWait</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Find element on the website.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">clickAndWait</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">By</span><span class="token plain"> locator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Click element and wait for 1 second.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sleep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">long</span><span class="token plain"> millis</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">boolean</span><span class="token plain"> logOutput</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Let system sleep a period of time.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ol start="3"><li>There are also some commonly used functions except in AbstractSubmarineIT.java.</li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-java codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// In WebDriverManager.java:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">WebDriver</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getWebDriver</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// This return a firefox webdriver which has been set to your workbench website.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ol start="4"><li>Add <a href="https://junit.org/junit5/docs/current/user-guide/" target="_blank" rel="noopener noreferrer">JUnit</a> annotation before your testing function, e.g., @Beforeclass, @Test, and @AfterClass. You can refer to <a href="https://github.com/apache/submarine/blob/master/submarine-test/test-e2e/src/test/java/org/apache/submarine/integration/loginIT.java" target="_blank" rel="noopener noreferrer">loginIT.java</a>.</li><li>Use command mentioned above to compile and run to test whether it works as your anticipation.</li></ol></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/apache/submarine/edit/master/docs/docs/devDocs/IntegrationTest.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/devDocs/BuildFromCode"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« How to Build Submarine</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/devDocs/QuickDevTips"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Quick development Tips Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#k8s-test" class="table-of-contents__link">k8s test</a><ul><li><a href="#run-k8s-test-in-locally" class="table-of-contents__link">Run k8s test in locally</a></li><li><a href="#run-k8s-test-in-travis" class="table-of-contents__link">Run k8s test in travis</a></li></ul></li><li><a href="#e2e-test" class="table-of-contents__link">E2E test</a><ul><li><a href="#e2e-tests-can-be-executed-both-locally-and-in-travis-for-workbench-developer" class="table-of-contents__link">E2E tests can be executed both locally and in Travis (For workbench developer)</a></li><li><a href="#run-the-existing-tests" class="table-of-contents__link">Run the existing tests.</a></li><li><a href="#add-your-own-integration-test" class="table-of-contents__link">Add your own integration test</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api/environment">API docs</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/apache-submarine" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://s.apache.org/slack-invite" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://medium.com/@apache.submarine" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/apache/submarine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Apache Submarine is Apache2 Licensed software.</div></div></div></footer></div>
<script src="/styles.09189f07.js"></script>
<script src="/runtime~main.36b43118.js"></script>
<script src="/main.76a27e4e.js"></script>
<script src="/1.eb6a3f1a.js"></script>
<script src="/59.7305c3a6.js"></script>
<script src="/60.f9f0fa51.js"></script>
<script src="/935f2afb.02cd337f.js"></script>
<script src="/58.438a340f.js"></script>
<script src="/60491701.e79570d4.js"></script>
</body>
</html>